package leetcode.editor.cn;
import java.util.*;
//åœ¨ "100 game" è¿™ä¸ªæ¸¸æˆä¸­ï¼Œä¸¤åçŽ©å®¶è½®æµé€‰æ‹©ä»Ž 1 åˆ° 10 çš„ä»»æ„æ•´æ•°ï¼Œç´¯è®¡æ•´æ•°å’Œï¼Œå…ˆä½¿å¾—ç´¯è®¡æ•´æ•°å’Œè¾¾åˆ°æˆ–è¶…è¿‡ 100 çš„çŽ©å®¶ï¼Œå³ä¸ºèƒœè€…ã€‚ 
//
// å¦‚æžœæˆ‘ä»¬å°†æ¸¸æˆè§„åˆ™æ”¹ä¸º â€œçŽ©å®¶ä¸èƒ½é‡å¤ä½¿ç”¨æ•´æ•°â€ å‘¢ï¼Ÿ 
//
// ä¾‹å¦‚ï¼Œä¸¤ä¸ªçŽ©å®¶å¯ä»¥è½®æµä»Žå…¬å…±æ•´æ•°æ± ä¸­æŠ½å–ä»Ž 1 åˆ° 15 çš„æ•´æ•°ï¼ˆä¸æ”¾å›žï¼‰ï¼Œç›´åˆ°ç´¯è®¡æ•´æ•°å’Œ >= 100ã€‚ 
//
// ç»™å®šä¸€ä¸ªæ•´æ•° maxChoosableInteger ï¼ˆæ•´æ•°æ± ä¸­å¯é€‰æ‹©çš„æœ€å¤§æ•°ï¼‰å’Œå¦ä¸€ä¸ªæ•´æ•° desiredTotalï¼ˆç´¯è®¡å’Œï¼‰ï¼Œåˆ¤æ–­å…ˆå‡ºæ‰‹çš„çŽ©å®¶æ˜¯å¦èƒ½ç¨³
//èµ¢ï¼ˆå‡è®¾ä¸¤ä½çŽ©å®¶æ¸¸æˆæ—¶éƒ½è¡¨çŽ°æœ€ä½³ï¼‰ï¼Ÿ 
//
// ä½ å¯ä»¥å‡è®¾ maxChoosableInteger ä¸ä¼šå¤§äºŽ 20ï¼Œ desiredTotal ä¸ä¼šå¤§äºŽ 300ã€‚ 
//
// ç¤ºä¾‹ï¼š 
//
// è¾“å…¥ï¼š
//maxChoosableInteger = 10
//desiredTotal = 11
//
//è¾“å‡ºï¼š
//false
//
//è§£é‡Šï¼š
//æ— è®ºç¬¬ä¸€ä¸ªçŽ©å®¶é€‰æ‹©å“ªä¸ªæ•´æ•°ï¼Œä»–éƒ½ä¼šå¤±è´¥ã€‚
//ç¬¬ä¸€ä¸ªçŽ©å®¶å¯ä»¥é€‰æ‹©ä»Ž 1 åˆ° 10 çš„æ•´æ•°ã€‚
//å¦‚æžœç¬¬ä¸€ä¸ªçŽ©å®¶é€‰æ‹© 1ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªçŽ©å®¶åªèƒ½é€‰æ‹©ä»Ž 2 åˆ° 10 çš„æ•´æ•°ã€‚
//ç¬¬äºŒä¸ªçŽ©å®¶å¯ä»¥é€šè¿‡é€‰æ‹©æ•´æ•° 10ï¼ˆé‚£ä¹ˆç´¯ç§¯å’Œä¸º 11 >= desiredTotalï¼‰ï¼Œä»Žè€Œå–å¾—èƒœåˆ©.
//åŒæ ·åœ°ï¼Œç¬¬ä¸€ä¸ªçŽ©å®¶é€‰æ‹©ä»»æ„å…¶ä»–æ•´æ•°ï¼Œç¬¬äºŒä¸ªçŽ©å®¶éƒ½ä¼šèµ¢ã€‚
// 
// Related Topics ä½è¿ç®— è®°å¿†åŒ–æœç´¢ æ•°å­¦ åŠ¨æ€è§„åˆ’ çŠ¶æ€åŽ‹ç¼© åšå¼ˆ ðŸ‘ 256 ðŸ‘Ž 0

public class æˆ‘èƒ½èµ¢å—{
	public static void main(String[] args) {
		Solution solution = new æˆ‘èƒ½èµ¢å—().new Solution();
	    
	}
//leetcode submit region begin(Prohibit modification and deletion)
	/**
	 * @Description:
	 * ç”±äºŽçŠ¶æ€ä¸å¯ç”¨æ•°ç»„è¿›è¡Œä¼ é€’ã€åœ¨é€’å½’å½“ä¸­ä¼šå—åˆ°æ”¹å˜ï¼Œä¸èƒ½å‡†ç¡®å®šä½å½“å‰çŠ¶æ€ã€‘ï¼Œæ•…åœ¨æ­¤å¤„ç”¨Intçš„ä½è¡¨ç¤ºçŠ¶æ€ï¼ˆ1è¡¨ç¤ºç”¨è¿‡,0è¡¨ç¤ºæœªç”¨è¿‡ï¼‰
	 * è¿™é‡Œé‡‡ç”¨DPçŠ¶æ€åŽ‹ç¼©çš„æ–¹å¼ï¼Œæ€æƒ³ä¸Žå›žæº¯ç±»ä¼¼ï¼Œåªæ˜¯è¿™é‡Œçš„çŠ¶æ€è¢«åŽ‹ç¼©æˆäº†ä¸€ä¸ªbitArrayäº†
	 * çŠ¶æ€åŽ‹ç¼©ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨äºŒè¿›åˆ¶çš„ç¬¬iä½çš„0æˆ–è€…1æ¥è¡¨ç¤ºiè¿™ä¸ªæ•°å­—çš„é€‰å–ä¸Žå¦ï¼Œè¿™æ ·æ‰€æœ‰æ•°å­—çš„é€‰å–çŠ¶æ€å°±å¯ä»¥ç”¨ä¸€ä¸ªæ•°æ¥å¾ˆæ–¹ä¾¿çš„è¡¨ç¤ºï¼Œ
	 * é¢˜ç›®è¯´äº†ä¸è¶…è¿‡20ä½ï¼Œæ‰€ä»¥è¿™é‡Œå°±å¯ä»¥ç”¨ä¸€ä¸ªintæ¥è¡¨ç¤ºçŠ¶æ€stateï¼Œé€šè¿‡stateæ¥åˆ¤æ–­çŠ¶æ€æ˜¯å¦ä¸€è‡´ï¼Œè¿›è€Œè¿›è¡Œè®°å¿†åŒ–çš„å­˜å–
	 */
	public class Solution {

		public boolean canIWin(int maxChoosableInteger, int desiredTotal) {

			if (maxChoosableInteger >= desiredTotal) return true;
			if ((1 + maxChoosableInteger) * maxChoosableInteger / 2 < desiredTotal) return false;
			/**
			 *  dpè¡¨ç¤º"æ¯ä¸ª"å–æ•°(Aå’ŒBå…±åŒä½œç”¨çš„ç»“æžœ)çŠ¶æ€ä¸‹çš„è¾“èµ¢
			 *  ä¾‹å¦‚åªæœ‰1,2ä¸¤ä¸ªæ•°é€‰æ‹©ï¼Œé‚£ä¹ˆ (1 << 2) - 1 = 4 - 1 = 3ç§çŠ¶æ€è¡¨ç¤ºï¼š
			 *  01,10,11åˆ†åˆ«è¡¨ç¤ºï¼šAå’ŒBå·²ç»é€‰äº†1ï¼Œå·²ç»é€‰äº†2ï¼Œå·²ç»é€‰äº†1ã€2çŠ¶æ€ä¸‹ï¼ŒAçš„è¾“èµ¢æƒ…å†µ
			 *  å¹¶ä¸”å¯è§è¿™ä¸ªè¡¨ç¤ºæ‰€æœ‰çŠ¶æ€çš„dpæ•°ç»„çš„æ¯ä¸ªçŠ¶æ€å…ƒç´ çš„é•¿åº¦ä¸ºmaxChoosableIntegerä½çš„äºŒè¿›åˆ¶æ•°
			 */
			Boolean[] dp = new Boolean[(1 << maxChoosableInteger) - 1];
			return dfs(maxChoosableInteger, desiredTotal, 0, dp);
		}

		/**
		 * @param maxChoosableInteger é€‰æ‹©çš„æ•°çš„èŒƒå›´[1,2,...maxChoosableInteger]
		 * @param desiredTotal ç›®æ ‡å’Œ
		 * @param state å½“å‰çŠ¶æ€çš„åè¿›åˆ¶è¡¨ç¤ºï¼ˆè®°å½•ç€å¯èƒ½ä¸æ­¢ä¸€ä¸ªæ•°è¢«é€‰æ‹©çš„çŠ¶æ€ï¼‰
		 * @param dp è®°å½•æ‰€æœ‰çŠ¶æ€
		 * @return
		 */
		private boolean dfs(int maxChoosableInteger, int desiredTotal, int state, Boolean[] dp) {
			if (dp[state] != null)
				return dp[state];
			/**
			 * ä¾‹å¦‚maxChoosableInteger=2ï¼Œé€‰æ‹©çš„æ•°åªæœ‰1,2ä¸¤ä¸ªï¼ŒäºŒè¿›åˆ¶åªè¦ä¸¤ä½å°±å¯ä»¥è¡¨ç¤ºä»–ä»¬çš„é€‰æ‹©çŠ¶æ€
			 * æœ€å¤§ä½ä¸º2ï¼ˆç¬¬2ä½ï¼‰ï¼Œä¹Ÿå°±æ˜¯1 << (2 - 1)çš„ç»“æžœï¼Œæ‰€ä»¥æœ€å¤§çš„ä½å¯ä»¥è¡¨ç¤ºä¸º  1 << (maxChoosableInteger - 1)
			 * æœ€å°çš„ä½å¯ä»¥è¡¨ç¤ºä¸º 1 << (1 - 1)ï¼Œä¹Ÿå°±æ˜¯1ï¼ˆç¬¬1ä½ï¼‰
			 * è¿™é‡Œiè¡¨ç¤ºæ‹¬å·çš„èŒƒå›´
			 */
			for (int i = 1; i <= maxChoosableInteger; i++){
				//å½“å‰å¾…æŠ‰æ‹©çš„ä½ï¼Œè¿™é‡Œçš„tmpåè¿›åˆ¶åªæœ‰ä¸€ä½ä¸º1ï¼Œç”¨æ¥åˆ¤æ–­å…¶ä¸º1çš„ä½ï¼Œå¯¹äºŽstateæ˜¯å¦ä¹Ÿæ˜¯åœ¨è¯¥ä½ä¸Šä¸º1
				//ç”¨ä»¥è¡¨ç¤ºè¯¥ä½ï¼ˆæ•°å­—ï¼‰æ˜¯å¦è¢«ä½¿ç”¨è¿‡
				/**
				 * (&è¿ç®—è§„åˆ™ï¼Œéƒ½1æ‰ä¸º1)
				 * ä¾‹å¦‚,i=3, tmp = 4, state = 3;
				 *  100
				 * &011
				 * =0  è¡¨ç¤ºè¯¥ä½æ²¡æœ‰è¢«ä½¿ç”¨è¿‡ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸‰ä½æ²¡æœ‰è¢«ä½¿ç”¨è¿‡ï¼Œå³æ•°å­—3 (i)æ²¡æœ‰è¢«ä½¿ç”¨è¿‡
				 */
				int tmp = (1 << (i - 1));
				if ((tmp & state) == 0){  //è¯¥ä½æ²¡æœ‰è¢«ä½¿ç”¨è¿‡
					//å¦‚æžœå½“å‰é€‰äº†iå·²ç»èµ¢äº†æˆ–è€…é€‰äº†iè¿˜æ²¡èµ¢ä½†æ˜¯åŽé¢å¯¹æ–¹é€‰æ‹©è¾“äº†,tmp|stateè¡¨ç¤ºè¿›è¡ŒçŠ¶æ€çš„æ›´æ–°
					/**
					 * ä¾‹å¦‚
					 *  100
					 * |011
					 * =111
					 */
					//æ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰åƒå›žæº¯ä¸€æ ·è¿›è¡ŒçŠ¶æ€çš„(èµ‹å€¼åŒ–çš„)æ›´æ–°ã€å›žæº¯
					//å…¶å®žè¿™é‡Œæ˜¯éšå«äº†å›žæº¯çš„ï¼Œæˆ‘ä»¬é€šè¿‡å‚æ•°ä¼ é€’æ›´æ–°åŽçš„state
					//ä½†æ˜¯æˆ‘ä»¬åœ¨è¿™ä¸ªè°ƒç”¨è€…è¿™é‡Œçš„stateè¿˜æ˜¯æ²¡æœ‰è¿›è¡Œæ›´æ–°çš„ï¼Œæ‰€ä»¥
					//å°±ç›¸å½“äºŽå›žæº¯äº†çŠ¶æ€ã€‚
					if (desiredTotal - i <= 0 || !dfs(maxChoosableInteger, desiredTotal - i, tmp|state, dp)) {
						dp[state] = true;
						return true;
					}
				}
			}
			//å¦‚æžœéƒ½èµ¢ä¸äº†
			dp[state] = false;
			return false;
		}
	}
//leetcode submit region end(Prohibit modification and deletion)

}
